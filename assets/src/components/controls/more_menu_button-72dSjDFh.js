import{a as y,u as E,r as G,j as t,E as S,n as g}from"../../../vendor-6J9SHA5K.js";import{M,a as k,b as I,c as b,d as s}from"../ui/menubar-OlJH4_ic.js";import{u as n}from"../../lib/timeline_state-Dw4tu5kw.js";import{a as d}from"../../lib/helpers-CGQdiVDq.js";import{D as v,a as O}from"../ui/dialog-TuTEWVuU.js";import{S as _}from"./more_dialog_content-X1ViG24K.js";import{g as F}from"../../logic/export_logic-zYbLsDjC.js";function N(){const r=n(e=>e.items),l=n(e=>e.phoneModel),h=n(e=>e.appSettings.isSettingsDialogOpen),a=n(e=>e.setIsSettingsDialogOpen),m=n(e=>e.appSettings.settingDialogContentIndex),c=n(e=>e.setSettingsDialogContentIndex),{duration:x}=y(),p=n(e=>e.importJsonData),{openFilePicker:u,filesContent:i,errors:o}=E({accept:".json",multiple:!1});G.useEffect(()=>{var e;if(i.length>0&&((e=i[0])!=null&&e.content))try{p(i[0].content)}catch(D){console.error("Error while loading Glyph data file:",D)}else o.length>0&&(console.error("Error while selecting Glyph data file:",o),alert(`File error.
Error while importing Glyph data file, possible file format mismatch?`))},[i,o,p]),o.length&&console.error(`Failed to import Glyph data: ${o}`);const f=()=>{u()},j=()=>{const e=JSON.stringify(r,null,2);g(e,`${l}_glyph_data_${d()}.json`)},C=()=>{const e=F(r,x*1e3);g(e,`${l}_glyph_data_${d()}.csv`)};return t.jsx(t.Fragment,{children:t.jsxs(v,{open:h,children:[t.jsx(O,{asChild:!0,children:t.jsx(M,{children:t.jsxs(k,{children:[t.jsx(I,{children:t.jsx(S,{})}),t.jsxs(b,{children:[t.jsx(s,{onClick:()=>{a(!0),c(0)},children:"Edit Selected (Advanced)"}),t.jsx(s,{onClick:()=>{a(!0),c(1)},children:"Generate Glyphs (Advanced)"}),t.jsx(s,{onClick:f,children:"Import Glyph Data"}),t.jsx(s,{onClick:j,children:"Export Project (.json) | BNGC"}),t.jsx(s,{onClick:C,children:"Export Glyph Data (.csv) | Custom ROMs"})]})]})})}),t.jsx(_,{dialogContentIdx:m})]})})}export{N as M};
