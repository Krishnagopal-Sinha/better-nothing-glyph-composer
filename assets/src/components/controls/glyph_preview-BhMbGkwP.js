import{a as w,r as l,j as t}from"../../../vendor-6J9SHA5K.js";import{u as f}from"../../lib/timeline_state-Dw4tu5kw.js";import{N as k}from"./previewDevices/NP1_Preview-DiIEAVch.js";import{N as y}from"./previewDevices/NP2_Preview-BVubdrR0.js";import{N as T}from"./previewDevices/NP2a_Preview-DS-zm_Kn.js";import{N as A}from"./previewDevices/NP1_15_Preview-DT0mZ2O5.js";import{g as C}from"../../lib/helpers-CGQdiVDq.js";import{d as S}from"../../lib/consts-Cj2W_VlV.js";function $({isAudioLoaded:d}){const{getPosition:a,duration:h}=w(),c=l.useRef(),i=f(e=>e.items),x=f(e=>e.phoneModel),P=f(e=>e.appSettings.showAudioTimeStamp),[,N]=l.useState(0),u=l.useCallback(()=>{N(a()*1e3),c.current=requestAnimationFrame(u)},[a]);l.useEffect(()=>(c.current=requestAnimationFrame(u),()=>{c.current&&cancelAnimationFrame(c.current)}),[u]);const o=[];function b(){const e=a()*1e3;for(let r=0;r<Object.keys(i).length;r++)for(let n=0;n<i[r].length;n++){const m=i[r][n],p=m.startTimeMilis,g=p+m.durationMilis;if(e>=p&&e<=g){const j=Math.floor((e-p)/S),M=m.effectData[j],v=Math.sqrt(M)/Math.sqrt(4095);o[m.glyphId]=`rgb(255 255 255 / ${v})`}if(n+1<i[r].length&&i[r][n+1].startTimeMilis>e)break}}b();let s;switch(x){case"NP1":s=t.jsx(k,{zoneColors:o});break;case"NP1_15":s=t.jsx(A,{zoneColors:o});break;case"NP2":s=t.jsx(y,{zoneColors:o});break;case"NP2a":s=t.jsx(T,{zoneColors:o});break;default:s=t.jsx("div",{className:"select-none p-2",children:"Feels Redundant. Scrap this?"})}return t.jsxs("div",{className:"bg-black rounded-[20px] h-[300px] w-[150px] text-center flex items-center justify-center ",children:[s,d&&P&&t.jsx("div",{className:"absolute text-sm text-center text-gray-700",children:`${C(a(),h)}`})]})}export{$ as G};
