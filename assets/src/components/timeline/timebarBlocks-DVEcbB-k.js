import{a as I,r as x,j as t}from"../../../vendor-6J9SHA5K.js";import{C as w,a as L,b as A,c as a}from"../ui/context-menu-BlNYhH7B.js";import{d as n}from"../../lib/data_store-DFUoucx7.js";import{u as g}from"../../lib/timeline_state-Dw4tu5kw.js";import{s as r}from"../../lib/helpers-CGQdiVDq.js";function E({secondToRespresent:e,setLoopAsUiPosition:p,setLoopBsUiPosition:c}){const s=g(o=>o.appSettings.timelinePixelFactor),{duration:u}=I(),[d,h]=x.useState(0),b=o=>{o<=0&&(o=1),n.set("loopAPositionInMilis",o),p(o)},m=x.useCallback(o=>{const i=n.get("editorScrollX")??0;h(o.clientX+i)},[h]),f=o=>{o.stopPropagation();const i=d/s*1e3,l=n.get("loopBPositionInMilis");if(i>u*1e3){r("Invalid Value - Loop A Position","Loop's starting point should be before the audio ends. UI may show it otherwise, but the audio has ended before this point.");return}if(l){i<l?b(i):r("Invalid Value - Loop A Position","Loop's starting point should be before it's ending.");return}b(i)},P=o=>{o.stopPropagation();const i=d/s*1e3,l=n.get("loopAPositionInMilis");if(i>u*1e3){r("Invalid Value - Loop B Position","Loop's ending point should be before the audio ends. UI may show it otherwise, but the audio has ended before this point.");return}if(l){i>l?(n.set("loopBPositionInMilis",i),c(i)):r("Invalid Value - Loop B Position","Loop's ending point must be before it's starting point.");return}n.set("loopBPositionInMilis",i),c(i)},C=o=>{o.stopPropagation(),n.set("loopBPositionInMilis",void 0),n.set("loopAPositionInMilis",void 0),p(void 0),c(void 0)},k=g(o=>o.toggleZoneVisibility),M=o=>{o.stopPropagation(),k()},v=e!==0&&e%60===0,j=e!==0&&e%10===0;return t.jsxs(w,{children:[t.jsx(L,{onContextMenu:m,children:t.jsxs("div",{className:"pt-0 select-none overflow-clip relative text-opacity-90 text-white",title:`${e} second(s)`,style:{width:`${s}px`,paddingLeft:s>=40?"6px":"1px",backgroundColor:v?"rgb(85 28 28)":j?"rgb(155 28 28)":"rgb(185 28 28)",boxShadow:e===0?"":"1px 0 0 #000 inset"},children:[t.jsx("pre",{children:" "}),s>25&&t.jsx("div",{className:"absolute left-[5%] inset-0 z-[5]",children:e+"s"}),t.jsx("div",{className:"absolute inset-0 h-[50%] my-auto  left-[25%] bg-black w-[1px]"}),t.jsx("div",{className:"absolute inset-0 h-[50%] my-auto  left-[50%] bg-black w-[1px]"}),t.jsx("div",{className:"absolute inset-0 h-[50%] my-auto  left-[75%] bg-black w-[1px]"})]},e)}),t.jsxs(A,{children:[t.jsx(a,{onClick:f,children:"Set Loop A"}),t.jsx(a,{onClick:P,children:"Set Loop B"}),t.jsx(a,{onClick:C,children:"Remove Loop"}),t.jsx(a,{onClick:M,children:"Toggle Zones"})]})]})}export{E as T};
